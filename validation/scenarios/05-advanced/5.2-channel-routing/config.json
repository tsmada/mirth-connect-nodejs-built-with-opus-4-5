{
  "id": "5.2",
  "name": "Channel Routing",
  "description": "Tests VMRouter and inter-channel communication patterns",
  "priority": 5,
  "type": "advanced",
  "channelFiles": [
    "router-source-channel.xml",
    "router-dest-channel-a.xml",
    "router-dest-channel-b.xml"
  ],
  "inputType": "mllp",
  "inputMessage": "inputs/routable-message.hl7",
  "timeout": 60000,
  "ports": {
    "javaSourceListener": 6673,
    "nodeSourceListener": 6674,
    "javaDestAListener": 6675,
    "nodeDestAListener": 6676,
    "javaDestBListener": 6677,
    "nodeDestBListener": 6678
  },
  "tests": [
    {
      "id": "5.2.1",
      "name": "VMRouter.routeMessage() basic call",
      "description": "Test routing a message from one channel to another using VMRouter",
      "setup": "Deploy source channel and destination channel A",
      "input": "Send message with routing indicator for channel A",
      "expected": "Message appears in destination channel A with correct content"
    },
    {
      "id": "5.2.2",
      "name": "Channel chaining",
      "description": "Test multi-hop routing through multiple channels",
      "setup": "Deploy source -> channel A -> channel B chain",
      "input": "Send message that should traverse all channels",
      "expected": "Message flows through chain, transformations accumulate"
    },
    {
      "id": "5.2.3",
      "name": "Destination routing filters",
      "description": "Test DestinationSet for conditional destination selection",
      "setup": "Deploy channel with multiple destinations and filter rules",
      "input": "Send messages with different filter criteria",
      "expected": "Each message routes to correct destination(s)"
    },
    {
      "id": "5.2.4",
      "name": "DestinationSet usage",
      "description": "Test programmatic destination control with DestinationSet",
      "setup": "Deploy channel using DestinationSet.removeAll() and add()",
      "input": "Send message with destination selector",
      "expected": "Only selected destinations receive message"
    }
  ],
  "validationPoints": [
    "Routed messages arrive at correct destination",
    "Message content matches after routing",
    "Routing decisions match between engines",
    "DestinationSet filtering matches"
  ]
}
